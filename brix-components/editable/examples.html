<!DOCTYPE html>
<html>
    <head>
        <script src="http://g-assets.daily.taobao.net/thx/brix-release/require-config-css.js"></script>
        <style>
            body {
                padding: 10px;
            }
        </style>
    </head>
    <body>
        <div class="mb40">
            <h3 bx-name="components/editable">This is a editable title.</h3>
            <p bx-name="components/editable">This is a editable paragraph. This is a editable paragraph. This is a editable paragraph. This is a editable paragraph. This is a editable paragraph. This is a editable paragraph.</p>
            <pre bx-name="components/editable">This is a editable predefined.</pre>
        </div>
        <div class="mb40">
            <p bx-name="components/editable" data-type="html"><kbd>This is a editable keyboard input element.</kbd> cool!</p>
        </div>
        <div class="mb40"><span bx-name="components/editable" data-content="A editable span with content from data-*."></span></div>
        <div class="mb40"><span>Hello</span><span class="ml5 mr5" bx-name="components/editable">Editable</span><span>!</span></div>
        <div class="mb40">
            <h3 class="fontsize-16">自定义模式</h3>
            <div class="editable" bx-name="components/editable"><span class="editable-content">自定义模式</span><span class="editable-toggle ml5">编辑</span>
                <input class="editable-input">
            </div>
        </div>
        <script>
            require(['components/readme'], function(Readme) {
                // var readme = new Readme()
                // readme.trimHTML(document.body)
                // readme.trimPredefined(document.body)
            })
            require(['brix/loader', 'jquery', 'highlightjs'], function(Loader, $, hljs) {
                window.Loader = Loader
                Loader.boot(function() {
                    $('iframe', top.document).height(
                    	$(document.body).outerHeight() + 270
                	)
                    $(document.body).find('pre code').each(function(index, code) {
                        hljs.highlightBlock(code)
                    })
                })
            })
        </script>
        <script>
            require(['brix/loader', 'jquery'], function(Loader, $) {
                Loader.boot(function() {
                    var instances = Loader.query('components/editable')
                    instances.on('change.editable', function(event, extra) {
                        if (event.namespace !== 'editable') return
                        console.log(event.type, event.namespace, extra)
                        if(extra.length < 3) {
                            console.warn('太短了，最少 3 个字符！')
                            event.preventDefault()
                        }
                        
                    })
                })
            })
        </script>
    </body>
</html>